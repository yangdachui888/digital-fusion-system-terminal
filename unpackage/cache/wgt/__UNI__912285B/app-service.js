if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((r=>t.resolve(e()).then((()=>r))),(r=>t.resolve(e()).then((()=>{throw r}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...r){uni.__log__?uni.__log__(e,t,...r):console[e].apply(console,[...r,t])}const r={commonApi:{getWeather:"/system/weather",getNowTime:"/common/getNowTime",getNewVersion:"/system/versions/getNewVersion"}};function a(e="",t={}){let a=e.split(".");a[0];let n=a.reduce(((e,t)=>(e&&"string"!=typeof e&&(e=e[t]),e)),r);if(/^http/.test(n))return n;let o=getApp().globalData.baseUrl;var i;return n=(n&&n.startsWith("/")?"":"/")+n,i=t,n=n.replace(/:\w+/g,(e=>{const t=e.slice(1);return i[t]||""})),n=o+n,n}function n(e,t="yyyy-MM-dd HH:mm:ss week numWeek"){if(!e)return"";const r=(e=new Date(e)).getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");let o=e.getHours();const i=String(e.getMinutes()).padStart(2,"0"),l=String(e.getSeconds()).padStart(2,"0"),s=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][e.getDay()],c=[7,1,2,3,4,5,6][e.getDay()];let u=e.getHours(),d="am";u>=12&&(d="pm",u>12&&(u-=12));const m=(t.includes("HH"),String(o).padStart(2,"0")),p=(t.includes("HH"),String(u).padStart(2,"0"));return t.replace("yyyy",r).replace("MM",a).replace("dd",n).replace("HH",m).replace("hh",p).replace("mm",i).replace("ss",l).replace("week",s).replace("am",d).replace("pm",d).replace("numWeek",c)}function o(e,t){getApp().globalData[e]=t}function i(e,t){try{uni.setStorageSync(e,JSON.stringify(t))}catch(r){}}function l(e){try{const t=uni.getStorageSync(e);if(t)return JSON.parse(t)}catch(t){}}function s(e){e.forEach((e=>{let r=e.split("/").pop().split(".").shift(),a="."+e.split(".").pop();uni.downloadFile({url:e,success:e=>{uni.getSavedFileList({success:function(t){if(t.fileList.length){let n=!1;t.fileList.forEach((t=>{t.filePath.includes(r)&&(n=!0,function(e,t,r,a){uni.removeSavedFile({filePath:t,complete:function(t){c(e,r,a)}})}(e.tempFilePath,t.filePath,r,a))})),n||c(e.tempFilePath,r,a)}else c(e.tempFilePath,r,a)}})},fail:e=>{t("log","at utils/tool.js:299","下载资源失败:",e)},complete:e=>{}})}))}function c(e,r,a){uni.saveFile({tempFilePath:e,success:function(e){!function(e,r,a){plus.io.resolveLocalFileSystemURL(e,(e=>{e.getParent((n=>{e.moveTo(n,"/"+r+a,(e=>{t("log","at utils/tool.js:343","重命名文件名",e.fullPath),t("log","at utils/tool.js:351","开始打开文件"),uni.getSavedFileList({success:function(e){e.fileList.length&&(t("log","at utils/tool.js:355","存在本地资源",e.fileList),e.fileList.forEach((e=>{})))}})}))}))}))}(e.savedFilePath,r,a)}})}function u(){uni.getSystemInfo({success:e=>{let t=e.appVersion||null,r=e.appWgtVersion||null;uni.showModal({title:"温馨提示",content:"当前版本号"+r+",apk版本号"+t+",是否重启应用？",success:e=>{e.confirm&&plus.runtime.restart()},fail:e=>{}})}})}const d={fetch:(e,t,r)=>new Promise(((n,o)=>{uni.request({url:a(e,t),data:t,method:(null==r?void 0:r.method)?r.method:"get",headers:{"Content-Type":"application/json"},success:e=>{n(e.data)}})})),upload:(e,t,r)=>new Promise(((n,o)=>{uni.uploadFile({url:a(e,t),filePath:t,name:"file",formData:{},method:(null==r?void 0:r.method)?r.method:"post",headers:{"Content-Type":"multipart/form-data"},success:e=>{n(e.data)}})}))};let m,p=null,g=null,h=6e4,y=!1,v=null,f=null,w=null,k=null;function b(){return getApp().globalData.socketUrl&&getApp().globalData.code}function S(){return new Promise((e=>{clearTimeout(v),v=setTimeout((()=>{y=!1,e()}),2e3)}))}async function x(){await e.nextTick(),b()&&(y||(y=!0,await async function(){p?(await uni.closeSocket({success:e=>{t("log","at utils/socket.js:341","WebSocket关闭成功001",e)},fail:e=>{t("error","at utils/socket.js:344","WebSocket关闭失败",e)}}),g&&clearInterval(g)):(t("warn","at utils/socket.js:352","WebSocket未初始化，无法关闭"),await uni.closeSocket({success:e=>{t("log","at utils/socket.js:355","WebSocket关闭成功114",e)},fail:e=>{t("error","at utils/socket.js:358","WebSocket关闭失败",e)}}),g&&clearInterval(g))}(),p=null,p=uni.connectSocket({url:getApp().globalData.socketUrl,success:async e=>{t("log","at utils/socket.js:51","WebSocket连接成功",e),B(),clearInterval(g),g=setInterval((()=>{p&&1===p.readyState?clearInterval(g):x()}),h),await S()},fail:async e=>{y=!1,t("error","at utils/socket.js:58","WebSocket连接失败",e),clearTimeout(f),f=setTimeout(x,2e4)},complete:async e=>{t("log","at utils/socket.js:63","WebSocket连接",getApp().globalData.socketUrl,e),await S()}})))}async function B(r){await e.nextTick(),b()&&(uni.onSocketMessage((e=>{t("log","at utils/socket.js:113","WebSocket收到消息：",e),function(e,t){N||(I(e,t),N=!0,clearTimeout(k),k=setTimeout((()=>{N=!1}),3e3));clearTimeout(m),m=setTimeout((()=>{I(e,t)}),2e3)}(e,r)})),uni.onSocketError((e=>{t("error","at utils/socket.js:117","WebSocket发生错误：",e),clearTimeout(w),w=setTimeout((()=>{plus.runtime.restart()}),h)})),uni.onSocketClose((e=>{clearTimeout(w),w=setTimeout((()=>{plus.runtime.restart(),g&&clearInterval(g)}),h)})))}let N=!1;function T(e){if(e)try{return Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}catch(t){return null}}let D=!1;function I(e,r){var a;let n=e.data;try{n=JSON.parse(n),t("log","at utils/socket.js:182","处理连接收到的消息_____________",n);let{type:u}=n||{};i("programInfo",n);const m=getCurrentPages(),p=m[m.length-1],g=null==(a=null==p?void 0:p.$page)?void 0:a.options;switch(u){case"startPlay":i("playFlag",n.playFlag);let e=l("programInfo");try{const{program:{resolution:t,modules:r,screenType:a}}=e;r.length&&(uni.$emit("pageRedirected"),p&&"pages/custom/custom"===p.route||uni.redirectTo({url:`/pages/custom/custom?${T(g)}`}))}catch(o){}break;case"stopPlay":i("playFlag",n.playFlag),uni.$emit("pageRedirected"),p&&"pages/index/index"===p.route||uni.redirectTo({url:"/pages/index/index"});break;case"play":if(!p||"pages/custom/custom"!==p.route){let e=l("playFlag");uni.$emit("pageRedirected"),e||uni.redirectTo({url:`/pages/custom/custom?${T(g)}`})}break;case 1:let t=null==n?void 0:n.resourceList;(null==t?void 0:t.length)&&s(t);break;case"null":default:i("programInfo",null),uni.$emit("pageRedirected"),p&&"pages/index/index"===p.route||uni.redirectTo({url:"/pages/index/index"});break;case"upGrade":try{d.fetch("commonApi.getNewVersion",{},{}).then((e=>{let t=e.data.wgtUrl;D||(D=!0,uni.downloadFile({url:t,success:e=>{D=!1,200===e.statusCode&&plus.runtime.install(e.tempFilePath,{},(function(){plus.runtime.restart()}),(function(e){}))},complete:function(e){D=!1}}))}))}catch(c){D=!1}}r&&function(e,t,...r){"function"==typeof e[t]&&e[t].apply(e,r)}(r,"getPageInfo",e)}catch(c){t("error","at utils/socket.js:311","处理消息失败",c)}}const E=(e,t)=>{const r=e.__vccOpts||e;for(const[a,n]of t)r[a]=n;return r};const V=E({data:()=>({dpr:l("dpr")||1,ratio:1,nowTime:null,intervalId:null,timeInfo:{time:"",week:"",date:""},weaterInfo:{wendu:"",type:"",weaterIcon:""}}),computed:{size(){return{px20:Number(20/this.ratio),px24:Number(24/this.ratio),px30:Number(30/this.ratio),px48:Number(48/this.ratio),px100:Number(100/this.ratio)}}},mounted(){uni.$on("pageRedirected",(()=>{clearInterval(this.intervalId)}))},async onShow(){const{devicePixelRatio:e}=uni.getDeviceInfo();this.ratio=e||1,this.getNowTime(),this.getWeater(),await x(),B(this)},onLoad(){},onUnload(){clearInterval(this.intervalId)},onHide(){clearInterval(this.intervalId)},beforeDestroy(){clearInterval(this.intervalId)},methods:{restartApp(){u()},async getNowTime(){let e=null;try{e=new Date}catch(r){t("log","at pages/index/index.vue:156","获取时间失败")}this.nowTime=new Date(e),o("nowTime",e),clearInterval(this.intervalId),this.intervalId=setInterval(this.updateCurrentTime,1e3)},updateCurrentTime(){let e=Date.now();const t=new Date(this.nowTime).getTime()-e;this.nowTime=new Date(e+1e3+t),this.timeInfo={time:n(this.nowTime,"HH:mm"),week:n(this.nowTime,"week"),date:n(this.nowTime,"yyyy/MM/dd"),mdDate:n(this.nowTime,"MM/dd"),timeHH:n(this.nowTime,"HH"),timemm:n(this.nowTime,"mm")}},extractNumber(e){const t=e.match(/(\d+)/);return t?t[1]:e},async getWeater(){let e={wendu:"14",type:"晴",low:"9",high:"15",city:"南京"};e&&(e.low=this.extractNumber(e.low),e.high=this.extractNumber(e.high),e.weaterIcon=function(e){switch(e){case"晴":case"晴天":return"i-qingtian";case"多云":return"i-duoyun";case"阴":case"阴天":return"i-yintian";case"晴转多云":return"i-qingzhuanduoyun";case"雨":case"小雨":return"i-xiaoyu";case"中雨":return"i-zhongyu";case"阵雨":case"雷阵雨":return"i-leizhenyu";case"暴雨":case"大雨":return"i-baoyu";case"雾":return"i-wu";case"雨夹雪":return"i-yujiaxue";case"小雪":case"雪":return"i-xiaoxue";case"中雪":return"i-zhongxue";case"阵雪":return"icon-zhenxue";case"大雪":return"i-daxue";case"暴雪":case"暴风雪":return"i-baoxue";case"冰雹":return"i-bingbao";default:return""}}(e.type),t("log","at pages/index/index.vue:198",e,7),this.weaterInfo=e)}}},[["render",function(t,r,a,n,o,i){var l,s,c,u,d,m,p,g,h,y,v,f;return e.openBlock(),e.createElementBlock("div",{class:"page-wrap"},[e.createElementVNode("div",{class:"header flex-sb y-center"},[e.createElementVNode("div",{class:"restart-wrap",onDblclick:r[0]||(r[0]=e=>i.restartApp())},null,32),e.createElementVNode("div",{class:"y-center",style:e.normalizeStyle(`color: #fff; padding: ${i.size.px30}px`)},[e.createElementVNode("div",{style:e.normalizeStyle(`font-size: ${i.size.px48}px; margin-right: ${i.size.px20}px`)},e.toDisplayString(null==(l=o.timeInfo)?void 0:l.time),5),e.createElementVNode("div",{style:e.normalizeStyle(`font-size: ${i.size.px24}px`)},[e.createElementVNode("div",null,e.toDisplayString(null==(s=o.timeInfo)?void 0:s.week),1),e.createElementVNode("div",null,e.toDisplayString(null==(c=o.timeInfo)?void 0:c.date),1)],4)],4)]),e.createElementVNode("scroll-view",{class:"main","scroll-y":"true"},[e.createElementVNode("div",{style:{height:"100%"},class:"center"},[e.createElementVNode("div",{class:"m-pd bg-c br18 t-m"},[e.createElementVNode("div",{class:"flex t-left br18 column center bg-lg",style:"width: 100%;overflow: hidden;"},[e.createElementVNode("div",{class:"flex center",style:{padding:"30px 60px 80px"}},[e.createElementVNode("div",{class:"center column"},[e.createElementVNode("div",{class:"bg-img",style:e.normalizeStyle("width: 333px;height: 270px;background-image: url(/static/"+(null==(u=o.weaterInfo)?void 0:u.weaterIcon)+".png);")},null,4),e.createElementVNode("div",{style:{color:"#004fc4","font-size":"50px","margin-top":"30px"}},e.toDisplayString(null==(d=o.weaterInfo)?void 0:d.type),1)]),e.createElementVNode("div",{class:"center column",style:{"margin-left":"100px"}},[e.createElementVNode("div",{style:{"font-size":"50px",color:"#004fc4","margin-top":"20px"}},[e.createTextVNode(e.toDisplayString(null==(m=o.weaterInfo)?void 0:m.city)+" ",1),e.createElementVNode("span",{style:{"font-size":"50px",color:"#0d0d0d","margin-top":"20px","margin-left":"20px"}},e.toDisplayString(o.weaterInfo.low)+"~"+e.toDisplayString(o.weaterInfo.high)+"℃ ",1)]),e.createElementVNode("div",{style:{"font-size":"40px",color:"#000","margin-top":"30px"}},e.toDisplayString(null==(p=o.timeInfo)?void 0:p.mdDate),1),e.createElementVNode("div",{style:{"font-size":"40px",color:"#000000","margin-top":"20px"}},e.toDisplayString(null==(g=o.timeInfo)?void 0:g.week),1),(null==(h=o.timeInfo)?void 0:h.timeHH)||(null==(y=o.timeInfo)?void 0:y.timemm)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"center time-wrap",style:{"margin-top":"50px"}},[e.createElementVNode("div",{class:"item center"},e.toDisplayString(null==(v=o.timeInfo)?void 0:v.timeHH),1),e.createElementVNode("div",{style:{"font-size":"40px",margin:"0 30px"}},":"),e.createElementVNode("div",{class:"item center"},e.toDisplayString(null==(f=o.timeInfo)?void 0:f.timemm),1)])):e.createCommentVNode("",!0)])])])])])])])}],["__scopeId","data-v-f855fa04"]]),_=E({__name:"index",props:{attributes:Object},setup(r){const a=r,n=e.reactive({attr:{imgUrl:[],borderRadius:0,objectFit:"cover"}});return e.watch((()=>a.attributes),(e=>{t("log","at components/Template/element/image/index.vue:44","image 001",e),n.attr=e})),e.onMounted((()=>{n.attr=a.attributes})),(t,r)=>{var a,o,i;return e.openBlock(),e.createElementBlock("div",{class:"whi100",style:e.normalizeStyle(`border-radius:${null==(a=n.attr)?void 0:a.borderRadius}px;overflow:hidden;`)},[(null==(o=n.attr)?void 0:o.imgUrl)&&(null==(i=n.attr)?void 0:i.imgUrl.length)>0?(e.openBlock(),e.createElementBlock("swiper",{key:0,class:"whi100","indicator-dots":!0,autoplay:!0,interval:3e3,duration:500},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.attr.imgUrl,((t,r)=>{var a;return e.openBlock(),e.createElementBlock("swiper-item",{key:r},[e.createElementVNode("image",{src:t,alt:"",class:"whi100",style:e.normalizeStyle(`object-fit:${null==(a=n.attr)?void 0:a.objectFit}`)},null,12,["src"])])})),128))])):e.createCommentVNode("",!0)],4)}}},[["__scopeId","data-v-c0adab2a"]]),z=E({__name:"index",props:{attributes:Object},setup(t){const r=t,a=e.reactive({attr:{word:null}});function n(e){let t=1;const{devicePixelRatio:r}=uni.getDeviceInfo();t=r||1,a.attr.fontSize=e/t}return e.watch((()=>r.attributes),(e=>{var t;e&&(a.attr=e,n(null==(t=a.attr)?void 0:t.fontSize))})),e.onMounted((()=>{var e;r.attributes&&(a.attr=r.attributes,n(null==(e=a.attr)?void 0:e.fontSize))})),(t,r)=>{var n,o,i,l,s,c,u;return e.openBlock(),e.createElementBlock("div",{class:"whi100"},[e.withDirectives(e.createElementVNode("textarea",{class:"whi100 text-item","onUpdate:modelValue":r[0]||(r[0]=e=>a.attr.word=e),tabindex:"0",autocomplete:"off",placeholder:"我是文本",readOnly:!0,resize:"none",style:e.normalizeStyle(`font-size:${null==(n=null==a?void 0:a.attr)?void 0:n.fontSize}px;color:${null==(o=a.attr)?void 0:o.color};line-height:${null==(i=a.attr)?void 0:i.lineHeight};text-align:${null==(l=a.attr)?void 0:l.textAlign};font-family:${null==(s=a.attr)?void 0:s.fontFamily};font-weight:${null==(c=a.attr)?void 0:c.fontWeight};text-decoration:${null==(u=a.attr)?void 0:u.textDecoration};`)},null,4),[[e.vModelText,a.attr.word]])])}}},[["__scopeId","data-v-b6ff66ae"]]),F=E({__name:"index",props:{attributes:Object,default:{}},setup(t){const r=t,a=e.reactive({attr:{videoUrl:null,objectFit:null}});return e.ref(null),e.watch((()=>r.attributes),(e=>{a.attr=e})),e.onMounted((()=>{a.attr=r.attributes})),(t,r)=>{var n,o;return e.openBlock(),e.createElementBlock("div",{class:"whi100 relative"},[(null==(n=a.attr)?void 0:n.videoUrl)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"whi100 relative"},[e.createElementVNode("video",{autoplay:!0,loop:!0,src:a.attr.videoUrl,class:"video-player whi100",style:e.normalizeStyle(`object-fit:${null==(o=a.attr)?void 0:o.objectFit}`),controls:!1,"enable-progress-gesture":!1,"show-progress":!1}," 你的app暂时不支持视频播放。 ",12,["src"])])):e.createCommentVNode("",!0)])}}},[["__scopeId","data-v-4334e15d"]]),$=E({__name:"index",props:{attributes:Object},setup(t){const r=t,a=e.reactive({attr:{hiddenEle:!1,audioUrl:null}});return e.watch((()=>r.attributes),(e=>{a.attr=e})),e.onMounted((()=>{a.attr=r.attributes})),(t,r)=>{var n,o;return e.openBlock(),e.createElementBlock("div",{class:"whi100 relative",style:e.normalizeStyle((null==(n=a.attr)?void 0:n.hiddenEle)?"visibility:hidden":" ")},[(null==(o=a.attr)?void 0:o.audioUrl)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"audio-player"},[e.createElementVNode("audio",{ref:"audioRef",autoplay:!0,loop:a.attr.loop,src:a.attr.audioUrl},null,8,["loop","src"])])):e.createCommentVNode("",!0)],4)}}},[["__scopeId","data-v-de7cbd76"]]),C={__name:"index",props:{attributes:Object},setup(t){const r=t,a=e.reactive({attr:{},formatTime:{date:null,week:null,time:null},intervalTimer:null});function n(){var e;const t=new Date;a.attr.time=t.toLocaleString(),a.attr.showDate&&(a.formatTime.date=o(a.attr.time,a.attr.dateFormat)),a.attr.showWeek&&(a.formatTime.week=o(a.attr.time,a.attr.weekFormat)),a.attr.showTime&&("12H"===(null==(e=a.attr)?void 0:e.timeH)?(a.attr.timeFormat=a.attr.timeFormat.replace("HH","hh"),a.formatTime.time=o(a.attr.time,a.attr.timeFormat)):(a.attr.timeFormat.replace("hh","HH"),a.formatTime.time=o(a.attr.time,a.attr.timeFormat)))}function o(e,t="YYYY-MM-DD HH:mm:ss cnWeek cnShortWeek enWeek enShortWeek numWeek ww"){if(!e)return"";const r=(e=new Date(e)).getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");let o=e.getHours();const i=String(e.getMinutes()).padStart(2,"0"),l=String(e.getSeconds()).padStart(2,"0"),s=String((c=r,u=a,d=n,m=new Date(c,parseInt(u)-1,d),p=new Date(c,0,1),g=Math.round((m.valueOf()-p.valueOf())/864e5),Math.ceil((g+(p.getDay()+1))/7))).padStart(2,"0");var c,u,d,m,p,g;const h=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][e.getDay()],y=["周日","周一","周二","周三","周四","周五","周六"][e.getDay()],v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],f=["Sun.","Mon.","Tue.","Wed.","Thu.","Fri.","Sat."][e.getDay()],w=[7,1,2,3,4,5,6][e.getDay()];let k=e.getHours(),b="am";k>=12&&(b="pm",k>12&&(k-=12));const S=(t.includes("HH"),String(o).padStart(2,"0")),x=(t.includes("HH"),String(k).padStart(2,"0"));return t.replace("YYYY",r).replace("MM",a).replace("DD",n).replace("HH",S).replace("hh",x).replace("mm",i).replace("ss",l).replace("cnWeek",h).replace("cnShortWeek",y).replace("enWeek",v).replace("enShortWeek",f).replace("am",b).replace("pm",b).replace("numWeek",w).replace("ww",s)}function i(){clearInterval(a.intervalTimer),a.intervalTimer=null}return e.watch((()=>r.attributes),(e=>{e&&(a.attr=e,n(),i(),a.intervalTimer=setInterval(n,1e3))})),e.onUnmounted((()=>{i()})),e.onMounted((()=>{r.attributes&&(a.attr=r.attributes,n(),i(),a.intervalTimer=setInterval(n,1e3))})),(t,r)=>{var n,o,i,l,s,c,u,d,m,p,g,h,y;return e.openBlock(),e.createElementBlock("div",{class:"whi100"},[(null==(n=a.attr)?void 0:n.showDate)||(null==(o=a.attr)?void 0:o.showTime)||(null==(i=a.attr)?void 0:i.showWeek)?(e.openBlock(),e.createElementBlock("div",{key:0,style:e.normalizeStyle(`font-size:${null==(l=null==a?void 0:a.attr)?void 0:l.fontSize}px;color:${null==(s=a.attr)?void 0:s.color};line-height:${null==(c=a.attr)?void 0:c.lineHeight};font-family:${null==(u=a.attr)?void 0:u.fontFamily};font-weight:${null==(d=a.attr)?void 0:d.fontWeight}`)},[(null==(m=a.attr)?void 0:m.showDate)?(e.openBlock(),e.createElementBlock("span",{key:0,style:e.normalizeStyle(`margin-right: ${null==(p=a.attr)?void 0:p.timeSpace}px`)},e.toDisplayString(a.formatTime.date),5)):e.createCommentVNode("",!0),(null==(g=a.attr)?void 0:g.showTime)?(e.openBlock(),e.createElementBlock("span",{key:1,style:e.normalizeStyle(`margin-right: ${null==(h=a.attr)?void 0:h.timeSpace}px`)},e.toDisplayString(a.formatTime.time),5)):e.createCommentVNode("",!0),(null==(y=a.attr)?void 0:y.showWeek)?(e.openBlock(),e.createElementBlock("span",{key:2},e.toDisplayString(a.formatTime.week),1)):e.createCommentVNode("",!0)],4)):e.createCommentVNode("",!0)])}}},A={__name:"index",props:{attributes:Object},setup(t){const r=t,a=e.reactive({attr:{},time:0,intervalTimer:null});function n(){a.time=function(){if(!function(e){const t=new Date(e);return!isNaN(t.getTime())}(a.attr.targetTime))return 0;let e=new Date(a.attr.targetTime)-Date.now();"elapsed"===a.attr.timeFormatted&&(e=Date.now()-new Date(a.attr.targetTime));if(e<=0)return"0";if("days"===a.attr.timeFormat){return(e/864e5).toFixed(2)}if("hours"===a.attr.timeFormat){return(e%864e5/36e5).toFixed(2)}if("minutes"===a.attr.timeFormat){return(e%36e5/6e4).toFixed(0)}if("seconds"===a.attr.timeFormat){return Math.floor(e/1e3).toFixed(0)}return 0}()}function o(){clearInterval(a.intervalTimer),a.intervalTimer=null}return e.watch((()=>r.attributes),(e=>{e&&(a.attr=e,o(),a.intervalTimer=setInterval((()=>{n()}),1e3))})),e.onUnmounted((()=>{o()})),e.onMounted((()=>{r.attributes&&(a.attr=r.attributes,o(),a.intervalTimer=setInterval((()=>{n()}),1e3))})),(t,r)=>{var n,o,i,l,s,c;return e.openBlock(),e.createElementBlock("div",{class:"whi100"},[(null==(n=a.attr)?void 0:n.targetTime)?(e.openBlock(),e.createElementBlock("div",{key:0,style:e.normalizeStyle(`font-size:${null==(o=null==a?void 0:a.attr)?void 0:o.fontSize}px;color:${null==(i=a.attr)?void 0:i.color};line-height:${null==(l=a.attr)?void 0:l.lineHeight};font-family:${null==(s=a.attr)?void 0:s.fontFamily};font-weight:${null==(c=a.attr)?void 0:c.fontWeight}`)},[e.createElementVNode("span",null,e.toDisplayString(a.time),1)],4)):e.createCommentVNode("",!0)])}}},H=E({__name:"index",props:{attributes:{type:Object,default:()=>({})}},setup(r){const a=r,n=e.ref(""),o=e.computed((()=>{var e;return`border-radius: ${(null==(e=a.attributes)?void 0:e.borderRadius)||0}px;`})),i=e=>{if(!e||!e.documentUrl||!Array.isArray(e.documentUrl)||0===e.documentUrl.length)return n.value="",void t("warn","at components/Template/element/document/index.vue:34","documentTpl: attributes.documentUrl is missing, not an array, or empty.");const r=e.documentUrl[0];let a=1.5;"contain"===e.objectFit?a=1:"cover"===e.objectFit&&(a=2);const o=`/static/pdf-viewer/viewer.html?file=${encodeURIComponent(r)}&interval=2000&scale=${a}`;t("log","at components/Template/element/document/index.vue:57","WebView URL:",o),n.value=o};return e.onMounted((()=>{i(a.attributes)})),e.watch((()=>a.attributes),(e=>{i(e)}),{deep:!0}),(t,r)=>(e.openBlock(),e.createElementBlock("div",{class:"webview-container",style:e.normalizeStyle(o.value)},[n.value?(e.openBlock(),e.createElementBlock("web-view",{key:0,src:n.value},null,8,["src"])):e.createCommentVNode("",!0)],4))}},[["__scopeId","data-v-2ddbaad5"]]),U={__name:"index",props:{attributes:Object},setup(r){const a=r,n=e.reactive({attr:{}});return e.watch((()=>a.attributes),(e=>{n.attr=e,t("log","at components/Template/element/html/index.vue:25",n.attr,222)})),e.onMounted((()=>{n.attr=a.attributes,t("log","at components/Template/element/html/index.vue:30",n.attr,111)})),(t,r)=>{var a,o;return e.openBlock(),e.createElementBlock("div",{class:"whi100"},[(null==(a=n.attr)?void 0:a.htmlUrl)?(e.openBlock(),e.createElementBlock("iframe",{key:0,class:"whi100",src:null==(o=n.attr)?void 0:o.htmlUrl},null,8,["src"])):e.createCommentVNode("",!0)])}}},M={__name:"index",props:{attributes:{type:Object,required:!0}},setup(r){const a=r,n=e.reactive({attr:{...a.attributes,showHighLow:!0},weather:{}}),o=e.computed((()=>({fontSize:n.attr.fontSize+"px",color:n.attr.color,lineHeight:n.attr.lineHeight,fontFamily:n.attr.fontFamily,fontWeight:n.attr.fontWeight})));async function i(e){try{const{data:t}=await d.fetch("commonApi.getWeather",{cityCode:e});n.weather=t}catch(r){t("error","at components/Template/element/weather/index.vue:75","获取天气数据失败:",r)}}return e.watch((()=>a.attributes),(e=>{n.attr={...e,showHighLow:!0},e.cityCode&&i(e.cityCode)}),{immediate:!0,deep:!0}),e.onMounted((()=>{n.attr.cityCode&&i(n.attr.cityCode)})),(t,r)=>(e.openBlock(),e.createElementBlock("div",{class:"whi100"},[n.weather.city?(e.openBlock(),e.createElementBlock("div",{key:0,class:"whi100 weather-wrap",style:e.normalizeStyle(o.value)},[n.attr.showCity?(e.openBlock(),e.createElementBlock("span",{key:0,style:e.normalizeStyle({marginRight:n.attr.space+"px"})},e.toDisplayString(n.weather.city),5)):e.createCommentVNode("",!0),n.attr.showType?(e.openBlock(),e.createElementBlock("span",{key:1,style:e.normalizeStyle({marginRight:n.attr.space+"px"})},e.toDisplayString(n.weather.type),5)):e.createCommentVNode("",!0),n.attr.showWendu?(e.openBlock(),e.createElementBlock("span",{key:2,style:e.normalizeStyle({marginRight:n.attr.space+"px"})},e.toDisplayString(n.weather.wendu)+"℃ ",5)):e.createCommentVNode("",!0),n.attr.showHighLow?(e.openBlock(),e.createElementBlock("span",{key:3,style:e.normalizeStyle({marginRight:n.attr.space+"px"})},e.toDisplayString(n.weather.high)+" / "+e.toDisplayString(n.weather.low),5)):e.createCommentVNode("",!0),n.attr.showFx?(e.openBlock(),e.createElementBlock("span",{key:4,style:e.normalizeStyle({marginRight:n.attr.space+"px"})},e.toDisplayString(n.weather.fx)+" "+e.toDisplayString(n.weather.fl),5)):e.createCommentVNode("",!0),n.attr.showAqi?(e.openBlock(),e.createElementBlock("span",{key:5,style:e.normalizeStyle({marginRight:n.attr.space+"px"})}," 当前AQI为"+e.toDisplayString(n.weather.aqi),5)):e.createCommentVNode("",!0),n.attr.showYmd?(e.openBlock(),e.createElementBlock("span",{key:6},e.toDisplayString(n.weather.ymd),1)):e.createCommentVNode("",!0),n.attr.showNotice?(e.openBlock(),e.createElementBlock("span",{key:7,style:e.normalizeStyle({marginTop:n.attr.space+"px",display:"block"})},e.toDisplayString(n.weather.notice),5)):e.createCommentVNode("",!0)],4)):e.createCommentVNode("",!0)]))}},W=E({__name:"index",props:{attributes:Object},setup(t){const r=t,a=e.reactive({attr:{}});return e.watch((()=>r.attributes),(e=>{a.attr=e})),e.onMounted((()=>{a.attr=r.attributes})),(t,r)=>{var n,o,i,l,s,c,u,d,m,p,g;return e.openBlock(),e.createElementBlock("div",{class:"whi100"},[(null==(n=a.attr)?void 0:n.word)||(null==(o=a.attr)?void 0:o.btnWidth)||(null==(i=a.attr)?void 0:i.btnHeight)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["whi100",null==(l=a.attr)?void 0:l.textAlign]),style:e.normalizeStyle(`font-size:${null==(s=a.attr)?void 0:s.fontSize}px;color:${null==(c=a.attr)?void 0:c.color};background-color:${null==(u=a.attr)?void 0:u.btnBgColor};border:${null==(d=a.attr)?void 0:d.borderSize}px solid ${null==(m=a.attr)?void 0:m.borderColor};border-radius:${null==(p=a.attr)?void 0:p.borderRadius}px`)},e.toDisplayString(null==(g=a.attr)?void 0:g.word),7)):e.createCommentVNode("",!0)])}}},[["__scopeId","data-v-853bb498"]]);const j=E({data:()=>({previewData:{size:{},data:[]}}),components:{previewPage:E({__name:"previewPage",props:{previewSize:{type:Object,required:!1},previewModules:{type:Array,required:!1}},setup(t){const r=t,a=e.ref(r.previewSize);e.watch((()=>r.previewSize),(e=>{a.value=e}));const n=e.ref(r.previewModules);e.watch((()=>r.previewModules),(e=>{n.value=e}));const o=e=>{switch(e){case"image":return _;case"video":return F;case"audio":return $;case"text":return z;case"time":return C;case"timepiece":return A;case"document":return H;case"html":return U;case"weather":return M;case"button":return W;default:return null}};return e.onMounted((()=>{})),(t,r)=>(e.openBlock(),e.createElementBlock("div",{class:"canvas-region-wrap"},[e.createElementVNode("div",{class:"canvas",ref:"canvasRef",style:e.normalizeStyle({width:`${a.value.width}px`,height:`${a.value.height}px`})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,((t,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,style:{width:"100%",height:"100%"}},[e.createElementVNode("div",{style:e.normalizeStyle(`position:absolute;backgroundColor: ${t.backgroundColor}; width: ${t.position.w}px; height: ${t.position.h}px;top: ${t.position.y}px;left: ${t.position.x}px;background-color: ${t.backgroundColor};`)},[t.backgroundImage?(e.openBlock(),e.createElementBlock("div",{key:0,class:"img-inner",style:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0"}},[e.createElementVNode("image",{style:{width:"100%",height:"100%"},src:t.backgroundImage},null,8,["src"])])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.elements,((t,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,style:e.normalizeStyle(`position:absolute; width: ${t.position.w}px; height: ${t.position.h}px;top: ${t.position.y}px;left: ${t.position.x}px`)},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o(t.type)),{key:`ecom_${t.id}`,attributes:t.attr},null,8,["attributes"]))],4)))),128))],4)])))),128))],4)]))}},[["__scopeId","data-v-9392a900"]])},onShow(){this.getPageInfo(),B(this)},onUnload(){},onHide(){},beforeDestroy(){},onLoad(){},methods:{getSizeByResolution(e,t=0){const r=e.split(/x|\*/);if(2!==r.length)return{screenType:t,width:100,height:100};const[a,n]=r,o=0===t?[a,n]:[n,a];return{screenType:t,width:Number(o[0]),height:Number(o[1])}},getPageInfo(){try{let e=1;const{devicePixelRatio:t}=uni.getDeviceInfo();e=t||1;let r=l("programInfo");const{program:{resolution:a,modules:n,screenType:o}}=r;let{width:i,height:s}=this.getSizeByResolution(a,o);i/=e,s/=e,n&&n.length&&n.forEach(((t,r)=>{t.position={x:Number(t.x)/e,y:Number(t.y)/e,w:Number(t.w)/e,h:Number(t.h)/e},t.elements&&t.elements.length&&t.elements.forEach(((t,r)=>{t.active=!1,t.draggableVal=!1,t.position={x:Number(t.x)/e,y:Number(t.y)/e,w:Number(t.w)/e,h:Number(t.h)/e},t.attributes&&t.attributes.length&&(t.attr={},t.attributes.forEach(((r,a)=>{if(["fontSize","lineHeight","borderRadius"].includes(r.attKey)){let t=r.attValue.match(/(\d+)(px)?/);if(t&&t.length&&t.length>1){let a=Number(t[1])/e;t[2]&&(a+=t[2]),r.attValue=JSON.stringify(a)}}t.attr[r.attKey]=JSON.parse(r.attValue)})))}))})),this.previewData={size:{width:i,height:s},data:n}}catch(e){}},restartApp(){u()}}},[["render",function(t,r,a,n,o,i){const l=e.resolveComponent("preview-page");return e.openBlock(),e.createElementBlock("div",{style:{position:"relative"}},[e.createElementVNode("div",{class:"restart-wrap",onDblclick:r[0]||(r[0]=e.withModifiers((e=>i.restartApp()),["prevent"]))},null,32),e.createVNode(l,{previewSize:o.previewData.size,previewModules:o.previewData.data},null,8,["previewSize","previewModules"])])}]]);__definePage("pages/index/index",V),__definePage("pages/custom/custom",j);const P={data:()=>({}),globalData:{code:null,socketUrl:null,baseUrl:"http://192.168.90.3:9101",wsUrl:"ws://192.168.90.3:9105",nowTime:null,programContent:{},runtimeLook:!1},onLaunch:function(t){e.nextTick((()=>{x()}))},onShow:function(){this.getDeviceInfo(),this.hideTabBar();let e="F0-20-FF-B1-A0-5C";o("socketUrl",getApp().globalData.wsUrl+"/play/"+e),o("code",e),this.initData()},onHide:function(){this.hideTabBar()},methods:{getDeviceInfo(){const{devicePixelRatio:e}=uni.getDeviceInfo();i("dpr",e||1),o("dpr",e||1)},compareVersions(e,t){const r=e.split("."),a=t.split("."),n=Math.max(r.length,a.length);for(let o=0;o<n;o++){const e=parseInt(r[o]||0,10),t=parseInt(a[o]||0,10);if(e<t)return-1;if(e>t)return 1}return 0},getNewVersion(){this.runtimeLook||(this.runtimeLook=!0,d.fetch("commonApi.getNewVersion",{},{}).then((e=>{var t,r;let a=(null==(t=null==e?void 0:e.data)?void 0:t.versionCode)||null,n=(null==(r=null==e?void 0:e.data)?void 0:r.versionUrl)||null;uni.getSystemInfo({success:e=>{e.appVersion!=a&&e.appWgtVersion!=a&&n?-1===this.compareVersions(e.appVersion,a)&&uni.downloadFile({url:n,success:e=>{200==e.statusCode&&(plus.runtime.install(e.tempFilePath,{},(function(){plus.runtime.restart()}),(function(e){})),this.runtimeLook=!1)},fail:()=>{this.runtimeLook=!1}}):this.runtimeLook=!1}})})).catch((()=>{this.runtimeLook=!1})))},initData(){const e=plus.android.importClass("java.net.NetworkInterface").getByName("eth0");try{const t=e.getHardwareAddress();let r="";t.forEach((e=>{let t="";t=e<0?(256+e).toString(16):e.toString(16),1==t.length&&(t=`0${t}`),r+=t}));let a=r;for(let e=2;e<a.length;e+=3)a=a.slice(0,e)+":"+a.slice(e);o("socketUrl",getApp().globalData.wsUrl+"/play/"+a),o("code",a)}catch(t){}},hideTabBar(){uni.hideTabBar({success:e=>{},fail:e=>{}}),plus.navigator.setFullscreen(!0),plus.navigator.hideSystemNavigation()}}};const{app:R,Vuex:L,Pinia:O}={app:e.createVueApp(P)};uni.Vuex=L,uni.Pinia=O,R.provide("__globalStyles",__uniConfig.styles),R._component.mpType="app",R._component.render=()=>{},R.mount("#app")}(Vue);
